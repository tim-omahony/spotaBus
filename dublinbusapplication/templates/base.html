<!doctype html>
<html lang="en">
<head>
    {% load static %}
    <script> var csrfmiddlewaretoken = '{{ csrf_token }}'; </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/ac046bec8d.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
            integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
            integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ"
            crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link href="{% static '/map.css' %}" rel="stylesheet" type="text/css" xmlns="http://www.w3.org/1999/html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <script src=" {% static '/Map.js' %}"></script>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <title>Dublin Bus</title>
</head>

<body>

<div id="wrapper">

    <aside id="sidebar-wrapper">
        <div class="sidebar-brand">
            <h2>{% comment %}<i class="fas fa-bus" size: 7x></i> &nbsp;&nbsp;&nbsp;&nbsp;{% endcomment %} &nbsp; Dublin
                Bus</h2>
        </div>

        <ul class="sidebar-nav">
            <li id="home">
                <a href="/"><i class="fa fa-home"></i>Home</a>
            </li>

            <li id="about">
                <a href="/about"><i class="fas fa-bus"></i> About Us</a>
            </li>

            <li id="contact">
                <a href="/contact"><i class="fas fa-address-book "></i> Contact Us</a>
            </li>

            <li id="login">
                <a href="/login"><i class="fa fa-user"></i>Register/Login</a>
            </li>
        </ul>
    </aside>

    <div id="navbar-wrapper">
        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a href="#" class="navbar-brand" id="sidebar-toggle"><i class="fa fa-bars"></i></a>


                </div>

                {% comment %}<shows users name when user is logged in ;{% endcomment %}
                {% if request.user.is_authenticated %}
                    <span class="nav-link">Hello, {{ request.user }}</span>
                {% endif %}

                {% comment %} Changes login/logout icon accordingly to users status {% endcomment %}

                {% if request.user.is_authenticated %}
                    <span class="navbar-nav ml-auto"><a href="{% url 'logout' %}"><i
                            class="fas fa-sign-out-alt"></i></a></span>
                {% else %}
                    <span class="navbar-nav ml-auto"><a href="{% url 'logout' %}"><i
                            class="fas fa-sign-in-alt"></i></a></span>
                {% endif %}
            </div>


        </nav>
    </div>

    <section id="content-wrapper">
        {% block content %}
        {% endblock %}
    </section>


</div>

<!-- Copyright -->

<script>

    // this function provides the sidebar toggle functionality
    const $button = document.querySelector('#sidebar-toggle');
    const $wrapper = document.querySelector('#wrapper');

    $button.addEventListener('click', (e) => {
        e.preventDefault();
        $wrapper.classList.toggle('toggled');
    });


    // this function ensures the selected tab from the sidebar remains highlighted after page load using local storage
    $(document).ready(function () {
        $('.sidebar-nav > li').click(function () {
            //set localStorage
            localStorage.setItem("clicked", $(this).attr("id"))
            //remove from all li
            $('li').removeClass("active")
            //Add class to the clicked li
            $(this).addClass("active")
        });

        //get class on load
        var active = localStorage.getItem("clicked")
        active ? $("#" + active).addClass("active") : $('#home').addClass("active")
    })

</script>


<!-- Optional JavaScript; choose one of the two! -->

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
        crossorigin="anonymous"></script>


<!-- Option 2: Separate Popper and Bootstrap JS -->
<!--
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>
-->
<script async
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpmxEf_9hpbApu3UhIu8jY41LDdgPFkqc&libraries=places&callback=initMap">
</script>
<script src="https://unpkg.com/@googlemaps/markerclustererplus/dist/index.min.js"></script>
</body>
</html>